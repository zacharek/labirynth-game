(this["webpackJsonplabirynth-game"]=this["webpackJsonplabirynth-game"]||[]).push([[0],[,,,,,,,,function(e,t,i){e.exports=i(21)},,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var a=i(0),l=i.n(a),n=i(7),s=i.n(n),o=(i(13),i(1)),r=i(2),c=i(4),d=i(3),h=i(5),u=(i(14),i(15),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"entry__UI"},l.a.createElement("div",{className:"logo"}),l.a.createElement("h2",null,"LABYRINTH"),l.a.createElement("h1",null,"GAME"),l.a.createElement("div",{className:"button",onClick:this.props.handleClick},"CONTINUE"))}}]),t}(a.Component)),p=(i(16),i(17),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"credits__box"},l.a.createElement("h2",null,"CREDITS"),l.a.createElement("div",{className:"list"},l.a.createElement("div",null,"Project made by ",l.a.createElement("a",{href:"https://github.com/zacharek"},"zacharek")),l.a.createElement("div",null,"Icons made by ",l.a.createElement("a",{href:"https://www.flaticon.com/authors/zlatko-najdenovski",title:"Zlatko Najdenovski"},"Zlatko Najdenovski")," from ",l.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com")),l.a.createElement("a",{href:"https://www.vecteezy.com/"},"Vectors by Vecteezy"),l.a.createElement("div",null,"ArcadeClassic font is copyright (c) Jakob Fischer at www.pizzadude.dk,  all rights reserved."),l.a.createElement("div",null,"Textures of rock and exit are based on the ones from The Binding of Isaac: Rebirth")),l.a.createElement("div",{className:"button",onClick:this.props.handleCredits},"CLOSE"))}}]),t}(a.Component)),v=function(e){function t(){var e,i;Object(o.a)(this,t);for(var a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];return(i=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={credits:!1},i.handleCredits=function(){i.setState({credits:!i.state.credits})},i}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return!0!==this.state.credits?l.a.createElement("div",{className:"menu__standard"},l.a.createElement("h1",null,"MAIN MENU"),l.a.createElement("div",{className:"menu__content"},l.a.createElement("div",{className:"difficulty__box"},l.a.createElement("h3",null,"DIFFICULTY"),l.a.createElement("ul",null,l.a.createElement("li",{className:1===this.props.difficulty?"selected":null,onClick:function(){return e.props.handleDifficulty(1)}},"EASY"),l.a.createElement("li",{className:2===this.props.difficulty?"selected":null,onClick:function(){return e.props.handleDifficulty(2)}},"NORMAL"),l.a.createElement("li",{className:3===this.props.difficulty?"selected":null,onClick:function(){return e.props.handleDifficulty(3)}},"HARD"))),l.a.createElement("div",{className:"main"},l.a.createElement("div",{className:"play",onClick:this.props.handlePlay},"PLAY"),l.a.createElement("div",{className:"credits",onClick:this.handleCredits},"CREDITS")),l.a.createElement("div",{className:"character__selection"},l.a.createElement("h3",null,"CHARACTER"),l.a.createElement("div",{className:"character__slider"},l.a.createElement("div",{className:"character in__menu standby"}))))):l.a.createElement("div",{className:"menu__standard"},l.a.createElement("h1",null,"MAIN MENU"),l.a.createElement("div",{className:"menu__content"},l.a.createElement("div",{className:"difficulty__box"},l.a.createElement("h3",null,"DIFFICULTY"),l.a.createElement("ul",null,l.a.createElement("li",{className:1===this.props.difficulty?"selected":null,onClick:function(){return e.props.handleDifficulty(1)}},"EASY"),l.a.createElement("li",{className:2===this.props.difficulty?"selected":null,onClick:function(){return e.props.handleDifficulty(2)}},"NORMAL"),l.a.createElement("li",{className:3===this.props.difficulty?"selected":null,onClick:function(){return e.props.handleDifficulty(3)}},"HARD"))),l.a.createElement(p,{handleCredits:this.handleCredits}),l.a.createElement("div",{className:"character__selection"},l.a.createElement("h3",null,"CHARACTER"),l.a.createElement("div",{className:"character__slider"},l.a.createElement("div",{className:"character in__menu standby"})))))}}]),t}(a.Component),f=(i(18),i(19),i(20),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.level!==e.level||this.props.size!==e.size}},{key:"buildLevel",value:function(e){var t,i=this;return void 0!==e&&(t=e.map((function(e,t){return e.map((function(e,a){return 1===e.isEnter?l.a.createElement(m,{key:"X".concat(a,"Y").concat(t),class:"enter",size:i.props.size}):1===e.isExit?l.a.createElement(m,{key:"X".concat(a,"Y").concat(t),class:"exit",size:i.props.size}):0===e.wall?l.a.createElement(m,{key:"X".concat(a,"Y").concat(t),class:"pass",size:i.props.size}):l.a.createElement(m,{key:"X".concat(a,"Y").concat(t),class:"wall",size:i.props.size})}))}))),t}},{key:"render",value:function(){return l.a.createElement("div",{className:"game_grid"},this.buildLevel(this.props.level,this.props.size))}}]),t}(a.Component)),m=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.size!==e.size||this.props.class!==e.class}},{key:"render",value:function(){return l.a.createElement("div",{className:"game_block ".concat(this.props.class),style:{width:this.props.size+"px",height:this.props.size+"px"}})}}]),t}(a.Component),y=f;function E(e){for(var t=[],i=1;i<=e;i++){for(var a=[],l=1;l<=e;l++)a.push({wall:1,isEnter:0,isExit:0,hasPlayer:0});t.push(a)}return t}function w(e,t){var i=e,a=Math.floor(Math.random()*(i.length-2)+1),l=Math.floor(Math.random()*(i.length-2)+1),n=[l,a],s=0;for(i[a][l].isEnter=1,i[a][l].hasPlayer=1,i[a][l].wall=0;n.length<t;){var o=Math.ceil(4*Math.random());if(l=n[n.length-2],a=n[n.length-1],s>10)return{filledLevel:e,routePositions:n};1===o?void 0!==i[a+1]&&void 0!==i[a+1][l]?void 0!==i[a+2]&&void 0!==i[a+2][l]&&(1===i[a+1][l].wall&&1===i[a+2][l].wall?(void 0===i[a+1][l-1]||void 0!==i[a+1][l-1]&&1===i[a+1][l-1].wall)&&(void 0===i[a+1][l+1]||void 0!==i[a+1][l+1]&&1===i[a+1][l+1].wall)&&(i[a+1][l].wall=0,n.push(l,a+1),s=0):s++):s++:2===o?void 0!==i[a-1]&&void 0!==i[a-1][l]?void 0!==i[a-2]&&void 0!==i[a-2][l]&&(1===i[a-1][l].wall&&1===i[a-2][l].wall?(void 0===i[a-1][l-1]||void 0!==i[a-1][l-1]&&1===i[a-1][l-1].wall)&&(void 0===i[a-1][l+1]||void 0!==i[a-1][l+1]&&1===i[a-1][l+1].wall)&&(i[a-1][l].wall=0,n.push(l,a-1),s=0):s++):s++:3===o?void 0!==i[a]&&void 0!==i[a][l+1]?void 0!==i[a]&&void 0!==i[a][l+2]&&(1===i[a][l+1].wall&&1===i[a][l+2].wall?(void 0===i[a+1]||void 0===i[a+1][l+1]||void 0!==i[a+1][l+1]&&1===i[a+1][l+1].wall)&&(void 0===i[a-1]||void 0===i[a-1][l+1]||void 0!==i[a-1][l+1]&&1===i[a-1][l+1].wall)&&(i[a][l+1].wall=0,n.push(l+1,a),s=0):s++):s++:4===o&&(void 0!==i[a]&&void 0!==i[a][l-1]?void 0!==i[a]&&void 0!==i[a][l-2]&&(1===i[a][l-1].wall&&1===i[a][l-2].wall?(void 0===i[a+1]||void 0===i[a+1][l-1]||void 0!==i[a+1][l-1]&&1===i[a+1][l-1].wall)&&(void 0===i[a-1]||void 0===i[a-1][l-1]||void 0!==i[a-1][l-1]&&1===i[a-1][l-1].wall)&&(i[a][l-1].wall=0,n.push(l-1,a),s=0):s++):s++)}return i[n[n.length-1]][n[n.length-2]].isExit=1,{filledLevel:i,routePositions:n}}function g(e){for(var t=e.routePositions,i=e.filledLevel,a=0,l=0;a!==t.length||l<5*i.length;){a=t.length;var n=0,s=2*Math.round(Math.random()*t.length/2),o=t[s],r=t[s+1];for(t.splice(s,2),t.push(o),t.push(r);n<10;){var c=Math.ceil(4*Math.random());o=t[t.length-2],r=t[t.length-1],1===c?void 0!==i[r+1]&&void 0!==i[r+1][o]?void 0!==i[r+2]&&void 0!==i[r+2][o]&&(1===i[r+1][o].wall&&1===i[r+2][o].wall?(void 0===i[r+1][o-1]||void 0!==i[r+1][o-1]&&1===i[r+1][o-1].wall)&&(void 0===i[r+1][o+1]||void 0!==i[r+1][o+1]&&1===i[r+1][o+1].wall)&&(i[r+1][o].wall=0,t.push(o,r+1),n=0):n++):n++:2===c?void 0!==i[r-1]&&void 0!==i[r-1][o]?void 0!==i[r-2]&&void 0!==i[r-2][o]&&(1===i[r-1][o].wall&&1===i[r-2][o].wall?(void 0===i[r-1][o-1]||void 0!==i[r-1][o-1]&&1===i[r-1][o-1].wall)&&(void 0===i[r-1][o+1]||void 0!==i[r-1][o+1]&&1===i[r-1][o+1].wall)&&(i[r-1][o].wall=0,t.push(o,r-1),n=0):n++):n++:3===c?void 0!==i[r]&&void 0!==i[r][o+1]?void 0!==i[r]&&void 0!==i[r][o+2]&&(1===i[r][o+1].wall&&1===i[r][o+2].wall?(void 0===i[r+1]||void 0===i[r+1][o+1]||void 0!==i[r+1][o+1]&&1===i[r+1][o+1].wall)&&(void 0===i[r-1]||void 0===i[r-1][o+1]||void 0!==i[r-1][o+1]&&1===i[r-1][o+1].wall)&&(i[r][o+1].wall=0,t.push(o+1,r),n=0):n++):n++:4===c&&(void 0!==i[r]&&void 0!==i[r][o-1]?void 0!==i[r]&&void 0!==i[r][o-2]&&(1===i[r][o-1].wall&&1===i[r][o-2].wall?(void 0===i[r+1]||void 0===i[r+1][o-1]||void 0!==i[r+1][o-1]&&1===i[r+1][o-1].wall)&&(void 0===i[r-1]||void 0===i[r-1][o-1]||void 0!==i[r-1][o-1]&&1===i[r-1][o-1].wall)&&(i[r][o-1].wall=0,t.push(o-1,r),n=0):n++):n++)}a!==t.length&&(l=0),a===t.length&&l++}return i}var k=function(e,t){return function(e,t){var i,a=[],l=e;for(;a.length<t;)i=w(l,t),a=i.routePositions,l=E(e.length);return[[a[0],a[1]],g(i)]}(E(e),t*e)},z=function(e){function t(){var e,i;Object(o.a)(this,t);for(var a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];return(i=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={singleBlockSize:.88*window.innerHeight/i.props.genSettings.entrySize,level:[],size:i.props.genSettings.entrySize,difficulty:i.props.genSettings.entryDifficulty,player1positionAbsolute:[0,0],player1positionRelative:[0,0],player1moving:"standby",player1VelocityX:0,player1VelocityY:0},i.handleMoveRight=function(){var e=i.state.singleBlockSize,t=i.state.player1positionAbsolute,a=[i.state.player1positionRelative[0]+e/16,i.state.player1positionRelative[1]];if(a[0]+.375*e>e&&(a[1]<0||a[1]+.125*e>e))a=i.state.player1positionRelative;else if(a[0]+.375*e>e){var l=a[0]-e;t=[t[0]+1,t[1]],a=[l,a[1]]}1===i.state.level[1][t[1]][t[0]].isExit?i.handleCompleted():0===i.state.level[1][t[1]][t[0]].wall&&i.setState({player1positionAbsolute:t,player1positionRelative:a,player1moving:"move-right"})},i.handleMoveLeft=function(){var e=i.state.singleBlockSize,t=i.state.player1positionAbsolute,a=[i.state.player1positionRelative[0]-e/16,i.state.player1positionRelative[1]];if(a[0]<0&&(a[1]<0||a[1]+.125*e>e))a=i.state.player1positionRelative;else if(a[0]<0){var l=e+a[0];t=[t[0]-1,t[1]],a=[l,a[1]]}1===i.state.level[1][t[1]][t[0]].isExit?i.handleCompleted():0===i.state.level[1][t[1]][t[0]].wall&&i.setState({player1positionAbsolute:t,player1positionRelative:a,player1moving:"move-left"})},i.handleMoveUp=function(){var e=i.state.singleBlockSize,t=i.state.player1positionAbsolute,a=[i.state.player1positionRelative[0],i.state.player1positionRelative[1]-e/16];if(a[1]<0&&(a[0]<0||a[0]+.375*e>e))a=i.state.player1positionRelative;else if(a[1]<0){var l=e+a[1];t=[t[0],t[1]-1],a=[a[0],l]}1===i.state.level[1][t[1]][t[0]].isExit?i.handleCompleted():0===i.state.level[1][t[1]][t[0]].wall&&i.setState({player1positionAbsolute:t,player1positionRelative:a,player1moving:"move-up"})},i.handleMoveDown=function(){var e=i.state.singleBlockSize,t=i.state.player1positionAbsolute,a=[i.state.player1positionRelative[0],i.state.player1positionRelative[1]+e/16];if(a[1]+.125*e>e&&(a[0]<0||a[0]+.375*e>e))a=i.state.player1positionRelative;else if(a[1]+.125*e>e){var l=a[1]-e;t=[t[0],t[1]+1],a=[a[0],l]}1===i.state.level[1][t[1]][t[0]].isExit?i.handleCompleted():0===i.state.level[1][t[1]][t[0]].wall&&i.setState({player1positionAbsolute:t,player1positionRelative:a,player1moving:"move-down"})},i.handleCompleted=function(){i.state.size>100||(i.state.size>40&&i.state.difficulty<9?(i.props.score(i.state.size,i.state.difficulty),i.setState({difficulty:i.state.difficulty+1})):i.state.size>40&&9===i.state.difficulty?(i.props.score(i.state.size,i.state.difficulty),i.setState({difficulty:5,size:i.state.size+5})):i.state.difficulty<6?(i.props.score(i.state.size,i.state.difficulty),i.setState({difficulty:i.state.difficulty+1})):6===i.state.difficulty?(i.props.score(i.state.size,i.state.difficulty),i.setState({difficulty:3,size:i.state.size+5})):console.log("co\u015b jest nie tak"))},i}return Object(h.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var i,a=this.state.singleBlockSize;if(this.props.start!==e.start)i=k(this.state.size,this.state.difficulty);else if(this.state.difficulty!==t.difficulty&&this.state.size!==t.size)i=k(this.state.size+5,3),a=.88*window.innerHeight/(this.state.size+5);else if(this.state.size!==t.size)i=k(this.state.size+5,this.state.difficulty),a=.88*window.innerHeight/(this.state.size+5);else{if(this.state.difficulty===t.difficulty){if(this.state.player1positionRelative!==t.player1positionRelative)return!0;if(this.state.singleBlockSize!==t.singleBlockSize){var l=window.innerHeight/1512;return this.setState({player1positionRelative:[this.state.player1positionRelative[0]*l,this.state.player1positionRelative[1]*l]}),!0}return this.state.level[0]!==t.level[0]}i=k(this.state.size,this.state.difficulty+1)}return this.setState({singleBlockSize:a,level:i,player1positionAbsolute:i[0],player1positionRelative:[this.state.singleBlockSize/4,this.state.singleBlockSize/2],player1moving:"standby"}),!0}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("keydown",(function(t){"KeyD"===t.code||"ArrowRight"===t.code?e.handleMoveRight():"KeyA"===t.code||"ArrowLeft"===t.code?e.handleMoveLeft():"KeyW"===t.code||"ArrowUp"===t.code?e.handleMoveUp():"KeyS"!==t.code&&"ArrowDown"!==t.code||e.handleMoveDown()})),window.addEventListener("resize",(function(){var t;t=e.state.size!==e.props.genSettings.entrySize?.88*window.innerHeight/e.state.size:.88*window.innerHeight/e.props.genSettings.entrySize,e.setState({singleBlockSize:t})}))}},{key:"render",value:function(){if(0!==this.state.level.length){var e=this.state.player1positionAbsolute[1]*this.state.singleBlockSize+this.state.player1positionRelative[1]-this.state.singleBlockSize*this.state.size,t=this.state.player1positionAbsolute[0]*this.state.singleBlockSize+this.state.player1positionRelative[0],i=this.state.singleBlockSize/8,a=3*i,n=32*(window.innerHeight/1512*(10/this.state.size)-1),s=-3.25*i+n,o=-3*i/8+n;return l.a.createElement("div",{className:"game__container"},l.a.createElement(y,{level:this.state.level[1],size:this.state.singleBlockSize}),l.a.createElement("div",{className:"player__shadow",style:{top:e+"px",left:t+"px",height:i,width:a}},l.a.createElement("div",{className:"character ".concat(this.state.player1moving),style:{top:s,left:o,transform:"scale(".concat(10/this.state.size*(window.innerHeight/1512),")")}})))}return l.a.createElement("div",{className:"game__container"},l.a.createElement("div",{className:"message"},l.a.createElement("p",{onClick:this.props.startOnClick},"START"),l.a.createElement("div",null,"USE [W][S][A][D] TO MOVE")))}}]),t}(a.Component),b=function(e){function t(){var e,i;Object(o.a)(this,t);for(var a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];return(i=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={restarted:0,score:0},i.handleClickRestart=function(){i.setState({restarted:i.state.restarted+1})},i.handleScore=function(e,t){var a=i.state.score+i.props.genSettings.entrySize/10*(e*t);i.setState({score:a})},i}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"game__ui"},l.a.createElement("div",{className:"menu__content"},l.a.createElement("h2",null,"MENU"),l.a.createElement("div",{onClick:this.handleClickRestart},"RESTART"),l.a.createElement("div",{onClick:this.props.handleExit},"EXIT")),l.a.createElement("div",{className:"main"},l.a.createElement(z,{start:this.state.restarted,genSettings:this.props.genSettings,score:function(t,i){return e.handleScore(t,i)},startOnClick:this.handleClickRestart})),l.a.createElement("div",{className:"players__info"},l.a.createElement("h2",null,"PLAYER"),l.a.createElement("p",null,"SCORE"),l.a.createElement("p",null,this.state.score)))}}]),t}(a.Component),S=function(e){function t(){var e,i;Object(o.a)(this,t);for(var a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];return(i=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={firstEntry:1,inGame:0,generationSettings:{entryDifficulty:2,entrySize:10},difficulty:1},i.handleClickEntry=function(){i.setState({firstEntry:0})},i.handleClickPlay=function(){i.setState({inGame:1})},i.handleClickMenu=function(){i.setState({inGame:0})},i.handleSetDifficulty=function(e){var t={entryDifficulty:2,entrySize:10};2===e?t={entryDifficulty:3,entrySize:20}:3===e&&(t={entryDifficulty:3,entrySize:30}),i.setState({generationSettings:t,difficulty:e})},i}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return 0!==this.state.firstEntry?l.a.createElement(u,{handleClick:this.handleClickEntry}):0!==this.state.inGame?l.a.createElement(b,{handleExit:this.handleClickMenu,genSettings:this.state.generationSettings}):l.a.createElement(v,{handlePlay:this.handleClickPlay,handleDifficulty:this.handleSetDifficulty,difficulty:this.state.difficulty})}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[8,1,2]]]);
//# sourceMappingURL=main.283e9070.chunk.js.map